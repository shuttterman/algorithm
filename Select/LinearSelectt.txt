#include <cstdio>
void swap(int& a, int& b) {
    int t=a;
    a=b;
    b=t;
}

int ceil(double t) {
    if(t==(int)t)return t;
    else return t+1;
}

class LinearSelect {
    public:
        int select(int* arr, int p, int r, int i) { 
            if(p==r) return arr[p];
            int q = partition(arr, p, r);
            int k = q - p + 1;
            if(i<k) return select(arr, p, q-1, i);
            else if(i>k) return select(arr, q+1, r, i-k);
            else return arr[q];
        }

        int partition(int* arr, int p, int r) {
            int x = arr[r];
            int i = p-1;
            for(int j=p ; j<r ; j++)
                if(arr[j] <= x) swap(arr[++i], arr[j]);
            swap(arr[i+1], arr[r]);
            return i+1;
        }
        
        int linearselect(int* arr, int p, int r, int i) {
            int len = r-p+1;
            int j=0;
            int t=ceil((double)len/5);
            if(len==1) return arr[p];
            if(len<=5) return select(arr, p, r, i);
            else {
                int* brr = new int[t];
                if(len%5==0)
                    for(j=0 ; j<t ; j++)
                        brr[j] = select(arr, 5*j, 5*(j+1)-1, 3);
                else {
                    for(j=0 ; j<t-1 ; j++)
                        brr[j] = select(arr, 5*j, 5*(j+1)-1, 3);
                    brr[j] = select(arr, 5*j, (5*j)+(len%5)-1, ceil((double)(len%5)/2));
                }
                for(j=0 ; j<t ; j++)printf("%d ", *(brr+j));
                printf("\n");
                int m = linearselect(brr, 0, t-1, ceil((double)t/2));
                int q = partitionByMedian(arr, p, r, m);
                int k = q - p + 1;
                if(i<k) return linearselect(arr, p, q-1, i);
                else if(i>k) return linearselect(arr, q+1, r, i-k);
                else return arr[q];
            }

        }
        int partitionByMedian(int* arr, int p, int r, int m) {
            int i;
            for(i=p ; i<=r ; i++)
                if(arr[i]==m)break;
            swap(arr[i], arr[r]);
            return partition(arr, p, r);
        }


};

int main() {
    LinearSelect ls;
    int arr_size;
    scanf("%d", &arr_size);
    int* array = new int[arr_size];

    int numb;
    scanf("%d", &numb);

    for(int i=0 ; i<arr_size ; i++)scanf("%d", array+i);
    ls.linearselect(array, 0, arr_size-1, numb);
    return 0;
}
